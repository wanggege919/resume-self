<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>简历</title>
    <link rel="stylesheet" href="./a.css">
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="./loading.css">
    <script src="//at.alicdn.com/t/font_864312_d0l9ydkxbcv.js"></script>
    <style type="text/css">
        .icon {
            width: 1em;
            height: 1em;
            vertical-align: -0.15em;
            fill: currentColor;
            overflow: hidden;
        }
    </style>
</head>
<body>
<!--<div id="siteWelcome" class="site-welcome active">-->
    <!--<div class="loading"></div>-->
<!--</div>-->
<div class="topNavBar">
    <div id="topNavBarNav" class="nav">
        <a href="#" class="logo">
            <span class="rs">RS</span>
            <span class="card">card</span>
        </a>
        <ul>
            <li><a href="#siteAbout">关于</a></li>
            <li><a href="#siteSkills">技能</a></li>
            <li>
                <a href="#siteWorks">作品</a>
                <ul class="submenu">
                    <li><a href="#">作品1</a></li>
                    <li><a href="#">作品2</a></li>
                    <li><a href="#">作品3</a></li>
                </ul>
            </li>
            <li><a href="#">经验</a></li>
            <li><a href="#">价钱</a></li>
            <li>
                <a href="#">博客</a>
                <ul class="submenu">
                    <li><a href="#">博客1</a></li>
                    <li><a href="#">博客2</a></li>
                    <li><a href="#">博客3</a></li>
                </ul>
            </li>
            <li><a href="#">日历</a></li>
            <li><a href="#">联系</a></li>
            <li><a href="#">其他</a></li>
        </ul>
    </div>
</div>
<div class="banner">
    <div class="mask"></div>
</div>
<main>
    <div data-x id="siteAbout" class="userCard">
        <div class="message">
            <div class="headPic">
                <img src="./image/旺哥.jpg" height="347">
            </div>
            <div class="text">
                <div class="welcom">
                    <span>您好</span>
                    <span class="triangle"></span>
                </div>
                <h1>刘书旺</h1>
                <p>前端工程师</p>
                <hr>
                <dl class="clearfix">
                    <dt>年龄</dt>
                    <dd>24</dd>
                    <dt>所在城市</dt>
                    <dd>郑州</dd>
                    <dt>邮箱</dt>
                    <dd>1914161290@qq.com</dd>
                    <dt>手机</dt>
                    <dd>18848956986</dd>
                </dl>
            </div>
        </div>
        <footer>
            <a href="#">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-tian7_facebook"></use>
                </svg>
            </a>

            <a href="#">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-githup"></use>
                </svg>
            </a>

            <a href="#">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-weibo"></use>
                </svg>
            </a>


            <a href="#">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-weixin"></use>
                </svg>
            </a>

            <a href="#">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-qq"></use>
                </svg>
            </a>

            <a href="#">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-ttww"></use>
                </svg>
            </a>


        </footer>
    </div>
    <div class="downloadWrapper">
        <a href="#" class="downloadBut" download>下载 PDF 地址</a>
    </div>
    <p>
        刘书旺 是一名前端开发工程师 <br>
        技能: 擅长 HTML CSS JS的知识要点,熟悉jquery vue react等框架
    </p>

</main>
<section data-x id="siteSkills" class="skills">
    <h1>技能</h1>
    <ul>
        <li>
            <h3>html 5 &amp; css 3</h3>
            <div class="progressBar">
                <div class="progress one"></div>
            </div>
        </li>
        <li>
            <h3>javaScript</h3>
            <div class="progressBar">
                <div class="progress two"></div>
            </div>
        </li>
        <li>
            <h3>jQuery</h3>
            <div class="progressBar">
                <div class="progress three"></div>
            </div>
        </li>
        <li>
            <h3>Vue</h3>
            <div class="progressBar">
                <div class="progress four"></div>
            </div>
        </li>
        <li>
            <h3>React</h3>
            <div class="progressBar">
                <div class="progress five"></div>
            </div>
        </li>
        <li>
            <h3>Http</h3>
            <div class="progressBar">
                <div class="progress six"></div>
            </div>
        </li>
    </ul>
</section>


<section data-x id="siteWorks" class="portfolio">
    <h1>作品集</h1>
    <nav>
        <ul>
            <li id="portfolio1">全部</li>
            <li id="portfolio2">作品集</li>
            <li id="portfolio3">原生js&css</li>
        </ul>
        <div id="portfolioBar" class="bar status-1">
            <div class="inner"></div>
        </div>
    </nav>
    <script>
        portfolio1.onclick = function () {
            portfolioBar.className = "bar status-1"
        }
        portfolio2.onclick = function () {
            portfolioBar.className = "bar status-2"
        }
        portfolio3.onclick = function () {
            portfolioBar.className = "bar status-3"
        }

    </script>
    <div class="jobs">
        <div class="big">
            <img src="./image/1.jpg" alt="" width="600" height="500">
        </div>
        <div class="small">
            <img src="./image/2.jpg" alt="" width="300" height="230">
            <img src="./image/3.jpg" alt="" width="300" height="230">
        </div>
    </div>
</section>
<!--缓动函数库-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.2.0/Tween.min.js"></script>
<script src="./main.js"></script>
<script>
    // setTimeout(function(){
    //     siteWelcome.classList.remove('active')
    // })
    //添加 offset 类
    let specialTags = document.querySelectorAll('[data-x]')
    for(let i = 0;i<specialTags.length;i++){
        specialTags[i].classList.add('offset')
    }
    findClosest()
    window.onscroll = function(){
        if(window.scrollY > 0){
            topNavBarNav.classList.add('sticky')
        }else{
            topNavBarNav.classList.remove('sticky')
        }
        findClosest()
    }
    function findClosest() {
        let specialTags = document.querySelectorAll('[data-x]')
        let minIndex = 0
        for(let i=1;i<specialTags.length;i++){
            if(Math.abs(specialTags[i].offsetTop-window.scrollY) < Math.abs(specialTags[minIndex].offsetTop-window.scrollY)){
                minIndex = i
            }
        }
        //minIndex 就是离窗口最近的元素
        specialTags[minIndex].classList.remove('offset')
        let id = specialTags[minIndex].id
        console.log(id)
        let a = document.querySelectorAll('a[href="#'+ id +'"]')[0]
        console.log(a)
        let li = a.parentNode
        console.log(li)
        let children = li.parentNode.children
        for(let i=0;i<children.length;i++){
            children[i].classList.remove('highLight')
        }
        li.classList.add('highLight')
    }

    let liTags = document.querySelectorAll('.topNavBar>.nav>ul>li')
    for(let i = 0;i<liTags.length;i++){
        liTags[i].onmouseenter = function(x){
            //要监听父级元素,且子级元素与父级元素要相连哦
            // console.log(1)
            // console.log(x.currentTarget)
            let liTag = x.currentTarget
            liTag.classList.add('active')
        }
        liTags[i].onmouseleave = function(x){
            let liTag = x.currentTarget
            liTag.classList.remove('active')
        }
    }
    // Setup the animation loop.
    function animate(time) {
        requestAnimationFrame(animate);
        TWEEN.update(time);
    }
    requestAnimationFrame(animate);
    let aTags = document.querySelectorAll('.topNavBar>.nav>ul>li>a')
    for (let i = 0;i<aTags.length;i++){
        aTags[i].onclick = function(y){
            y.preventDefault() //阻止<a>标签的默认跳转动作
            let a = y.currentTarget
            // console.log(a.href) 这个得到的href是有http协议的
            //console.log(a.getAttribute('href')) //这个是写什么就会出来什么
            let href = a.getAttribute('href')
            let element = document.querySelector(href)
            let top = element.offsetTop

            let currentTop = window.scrollY
            let targetTop = top-80
            let s = targetTop - currentTop
            let t = Math.abs(s/100*100)//每一百像素分配300ms,根据距离来决定时间长短,时间要保证正值
            if(t>500){
                t=500
            }
            var coords = {y: currentTop };
            var tween = new TWEEN.Tween(coords)
                .to({y: targetTop }, t)
                .easing(TWEEN.Easing.Quadratic.Out)
                .onUpdate(function() {
                    window.scrollTo(0,coords.y)
                })
                .start();
        }
    }




</script>
</body>
</html>